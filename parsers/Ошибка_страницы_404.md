# Скрипт для выключения объявлений с ошибкой 404
Скрипт перебирает все кампании и группы. 

```js
function main(){
  var params = {muteHttpExceptions:true, followRedirects: false};
  
  var camp_it = AdWordsApp.campaigns().get(); //Можно сузить перебор кампаний добавиб блок withCondition().
                                              //Блоков может быть несколько
                                              //AdWordsApp.campaigns().withCondition("Name CONTAINS 'Часть названия кампании'").get();
                                              //AdWordsApp.campaigns().withCondition("Status = 'ENABLED'").get();
  
  while(camp_it.hasNext()){
  
  	var campaign = camp_it.next();
    var adGroup_it = campaign.adGroups().get();
    
    while(adGroup_it.hasNext()){
    
      var adGroup = adGroup_it.next();
      var ad_it = adGroup.ads().get();
      
      while(ad_it.hasNext()){
      
      	var ad = ad_it.next();
        var url = ad.urls().getFinalUrl();
        
        Logger.log("Cheking url - " + url);
        var resp = UrlFetchApp.fetch(url, params).getResponseCode();
        Logger.log(resp);
        if(resp == 404){
          ad.pause();
          //Logger.log(campaign.getName() + ": AdGroup " + adGroup.getName() +": ad " + ad.getId() + " - paused");
        }else{
          ad.enable();
          //Logger.log(campaign.getName() + ": AdGroup " + adGroup.getName() +": ad " + ad.getId() + " - enabled");
        }
      }
    }    
  }
}
```
